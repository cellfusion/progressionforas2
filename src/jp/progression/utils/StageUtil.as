/** * @author Mk-10:cellfusion */import jp.progression.utils.StringUtil;class jp.progression.utils.StageUtil {	public static function toSWFBasePath(stage:MovieClip, url:String):String	{		// stage が存在しなければ何も返さない		if (!stage) return "";				// 絶対パスの場合はそのまま		// 正規表現がないので、"://"の文字列が確認された時点で絶対パスと判定する		if (url.indexOf("://") > 0) return url;				// SWF ファイルを基点としたパスに変換する		var directory:Array = stage._url.split("/");		directory.splice(directory.length-1, 1, url);		url = directory.join("/");				// パスに /./ が存在すれば結合する		url = StringUtil.replace(url, "/./", "/");				// /A/B/../ なら /A/ に変換する		url = StringUtil.parentReplace(url);				return url;	}}